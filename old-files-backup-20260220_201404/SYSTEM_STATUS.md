# 🏆 最佳商品百科全书 - 系统状态文档

## 📅 最后更新
- **时间**: 2026年2月18日 23:55 (GMT+8)
- **状态**: 🟢 系统运行中，自动化处理已启动

## 🎯 项目目标
为245,317个商品品类进行高质量自动化评选，确保：
1. **科学性** - 基于市场数据的7维度加权评分
2. **合理性** - 严格的品牌-品类匹配验证
3. **真实性** - 只评选真实存在的品牌和商品
4. **高质量** - 详细评选理由（400+字），高置信度

## 🏗️ 系统架构

### 核心服务
| 服务 | 端口 | 状态 | 功能 |
|------|------|------|------|
| 智能评价系统 | 3080 | 🟢 运行中 | 自动化评选引擎，管理界面 |
| 首页服务器 | 3076 | 🟢 运行中 | 最佳商品网站首页 |
| 详情页服务器 | 3077 | 🟢 运行中 | 品类详情页面 |
| 自动化系统 | 3078 | 🟢 运行中 | 后台数据处理 |
| 真实产品自动化 | 3079 | 🟢 运行中 | 真实品牌数据采集 |

### 数据状态
- **总品类数**: 245,317
- **已处理品类**: 0 (全新开始)
- **数据文件**: `data/best-answers.json` (3字节，已清空)
- **预计完成**: 2026年5月21日
- **处理速度**: ~110品类/小时

## 🚀 访问链接

### 主要界面
1. **管理后台**: http://localhost:3080/admin
   - 批量处理控制
   - 进度监控
   - 质量检查

2. **网站首页**: http://localhost:3076
   - 全球最佳商品百科全书
   - 三级目录浏览
   - 全局搜索功能

3. **详情页示例**: 
   - http://localhost:3077/category/个护健康/剃须用品/一次性剃须刀
   - 动态加载品类数据

### 数据文件
- 主数据: `/Users/surferboy/Desktop/BestGoods/data/best-answers.json`
- 品类数据: `/Users/surferboy/Desktop/BestGoods/data/global-categories-expanded.json`
- 状态文件: `/Users/surferboy/Desktop/BestGoods/data/automation-status.json`

## 🔒 质量保证机制

### 1. 品牌匹配验证
```javascript
// 正确示例
"牙齿美白棉签" → ["云南白药", "Colgate", "Sensodyne", "Oral-B"]

// 错误示例（系统会拒绝）
"牙齿美白棉签" → ["Apple", "Samsung", "Huawei"]
```

### 2. 评选标准
- **最小评选理由**: 400字
- **最小置信度**: 80/100
- **价格验证**: 必须在指定区间内
- **具体型号**: 必须提供具体商品型号
- **数据来源**: 必须提供可验证来源

### 3. 自动验证流程
1. 品牌相关性检查
2. 价格区间验证
3. 评选理由长度检查
4. 置信度评分验证
5. 数据来源验证

## ⚙️ 自动化处理

### 当前状态
- **自动化脚本**: `auto-start-processing.js` 已启动
- **处理模式**: 小批量连续处理 (10个品类/批次)
- **运行方式**: 24/7不间断，自动重试失败品类
- **监控系统**: 每5分钟记录状态，每10分钟检查进度

### 处理流程
1. **品类分析** → 设置价格区间和评价维度
2. **商品评选** → 在每个价格区间×维度评选最佳商品
3. **质量验证** → 严格验证品牌匹配、评选理由等
4. **数据保存** → 保存到 `best-answers.json`
5. **进度更新** → 更新自动化状态

## 📊 监控与维护

### 日志文件
- 处理日志: `logs/auto-processing.log`
- 质量日志: `logs/quality-first-processing.log`
- 任务记录: `logs/auto-tasks/`

### 监控命令
```bash
# 检查服务状态
ps aux | grep -E "(intelligent|server-ultra)"

# 检查数据文件
wc -c data/best-answers.json

# 查看处理进度
cat data/automation-status.json

# 查看最新日志
tail -f logs/auto-processing.log
```

### 重启服务
```bash
# 如果服务停止
cd /Users/surferboy/Desktop/BestGoods
node intelligent-product-evaluation-system.js &
node server-ultra-narrow-homepage.js &
node server-detail-dynamic-simple.js &
```

## 🛠️ 故障排除

### 常见问题
1. **服务端口冲突**
   - 检查端口占用: `lsof -i :3080`
   - 修改配置文件中的端口号

2. **API调用失败**
   - 检查环境变量: `echo $DEEPSEEK_API_KEY`
   - 确保API密钥有效

3. **数据不更新**
   - 检查日志文件错误
   - 验证品类数据文件存在
   - 检查磁盘空间

4. **品牌匹配错误**
   - 检查 `brandMapping` 配置
   - 查看质量验证日志

### 紧急恢复
```bash
# 1. 停止所有服务
pkill -f "node.*(intelligent|server)"

# 2. 备份当前数据
cp data/best-answers.json data/best-answers-backup-$(date +%s).json

# 3. 重启服务
cd /Users/surferboy/Desktop/BestGoods
./start-complete-system.sh  # 如果存在
# 或手动启动各个服务
```

## 📈 进度跟踪

### 关键指标
- **处理速度**: 品类/小时
- **质量通过率**: 验证通过的商品比例
- **API成本**: 人民币/天
- **预计剩余时间**: 天

### 定期检查
1. 每日检查处理进度
2. 每周抽查评选质量
3. 每月审核成本预算
4. 定期备份数据文件

## ✅ 完成标准

### 短期目标 (1周内)
- [ ] 处理1,000个品类验证系统稳定性
- [ ] 质量通过率 ≥80%
- [ ] 建立完整的监控体系

### 中期目标 (1月内)
- [ ] 处理50,000个品类
- [ ] 优化处理速度至200品类/小时
- [ ] 建立人工审核队列机制

### 长期目标 (3月内)
- [ ] 完成所有245,317个品类
- [ ] 质量通过率 ≥90%
- [ ] 建立完整的运维体系

## 📞 支持与联系

### 系统信息
- **项目目录**: `/Users/surferboy/Desktop/BestGoods`
- **启动时间**: 2026-02-18T15:55:00.000Z
- **运行时长**: 自动化24/7运行

### 文档更新
- 每次重大变更更新此文档
- 记录系统配置变更
- 更新故障排除指南

---

**最后更新**: 2026-02-18 23:55  
**系统状态**: 🟢 自动化运行中  
**下一步**: 系统将自动处理，无需人工干预